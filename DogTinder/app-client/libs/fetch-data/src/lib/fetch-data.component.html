<h1 id="tableLabel">Dog Appointments</h1>

<p>This component demonstrates fetching data from the server.</p>

<p *ngIf="!appointments"><em>Loading...</em></p>

<table
  class="table table-striped"
  aria-labelledby="tableLabel"
  *ngIf="appointments"
  data-test="appointmentsTable"
>
  <thead>
    <tr>
      <th>Date</th>
      <th>Place</th>
      <th>Dog (name) (breed) (owner)</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let appointment of appointments">
      <td>{{ appointment.time | date: 'mediumDate' }}</td>
      <td>{{ appointment.place }}</td>
      <td>
        <ng-container *ngFor="let dog of appointment.dogs">
          <ng-container *ngIf="dog !== null">
            <div>
              Dog name: <strong>{{ dog.name }}</strong> - Dog breed:<strong>{{
                dog.breed
              }}</strong>
              - Owner: <strong>{{ dog.owner.name }}</strong>
            </div>
          </ng-container>
        </ng-container>
      </td>
    </tr>
  </tbody>
</table>
<div class="container">
  <div [hidden]="submitted">
    <h1>Add appointment</h1>
    <form [formGroup]="profileForm">
      <div class="form-group">
        <label for="time">time</label>
        <input
          type="date"
          class="form-control"
          id="time"
          required
          formControlName="time"
        />
      </div>
      <select class="custom-select mb-3" formControlName="placeid">
        <option value="">Choose place</option>
        <option *ngFor="let place of places" [ngValue]="place.placeId">
          {{ place.adress }}
        </option>
      </select>

      <select class="custom-select mb-3" formControlName="dogid">
        <option value="">Choose dog</option>
        <option *ngFor="let dog of dogs" [ngValue]="dog.dogId">
          {{ dog.name }}
        </option>
      </select>
      <button
        type="submit"
        class="btn btn-success"
        [disabled]="!profileForm.valid"
        (click)="onSubmit()"
      >
        Submit
      </button>
    </form>
  </div>
</div>
